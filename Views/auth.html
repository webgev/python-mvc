{% extends "_layout.html" %}
{% block content %}

<form method="POST" action="/auth/login" id="loginForm">
    <input type="text" name="login" id="login">
    <input type="text" name="password" id="password">
    <button type="submit">Enter</button>
</form>
<script type="text/javascript">
    document.getElementById("loginForm").onsubmit = function () {
        var settings = {
            "method": "POST",
            "headers": {
              'Accept': 'application/json',
              'Content-Type': 'application/json'
            },
            "body": JSON.stringify({
                "method": "auth.login",
                "params": {
                    "login": document.getElementById("login").value,
                    "password": document.getElementById("password").value
                }
            })
        }
        
        fetch('/api/', settings).then((res)=>{ 
            if (res.ok) {
                document.location.replace("/");
            }
        })
        return false
    }
</script>
{% endblock %}